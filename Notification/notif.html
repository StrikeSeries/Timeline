<!DOCTYPE html>
<html>
	<head>
		<title>Notification</title>
	</head>
	<body>
		<a href = "#" id = "perm">Request Permission</a>
		<a href = "#" id = "trigger">Trigger</a>
		<script>
			var perm = document.getElementById('perm');
			var trigger = document.getElementById('trigger');
			perm.addEventListener('click', function(e) {
				e.preventDefault();

				if(!window.Notification) {
					alert('Sorry, notifications are not supported.');
				}
				else {
					Notification.requestPermission(function(p) {
						if(p === 'denied') {
							alert('You have denied notifications.');
						}
						else if(p === 'granted') {
							alert('You have granted notifications.');
						}
					});
				}
			});
			trigger.addEventListener('click', function(e) {
				var notify;
				e.preventDefault();
				if(Notification.permission === 'default') {
					alert('Please allow notifications before doing this.');
				}
				else {
					notify = new Notification('New Message');
				}
			});
		</script>
	</body>
</html>